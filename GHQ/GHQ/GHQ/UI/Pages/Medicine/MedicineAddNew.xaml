<?xml version="1.0" encoding="utf-8"?>
<Base:BasePage xmlns="http://xamarin.com/schemas/2014/forms" xmlns:Base="clr-namespace:GHQ.UI.Pages;assembly=GHQ" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:i18n="clr-namespace:Service.Localization;assembly=GHQ"
               xmlns:controls="clr-namespace:Controls;assembly=ProjectX.Common"
               Title="{i18n:Translate PageHeader_AddNewMedicine}"
               x:Class="GHQ.UI.Pages.Medicine.MedicineAddNew">

  <RelativeLayout>

    <Image Aspect="AspectFill" RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width}" RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height}">
      <Image.Source>
        <OnPlatform x:TypeArguments="ImageSource" WinPhone="background.png" Android="background.png" iOS="background" />
      </Image.Source>
    </Image>

    <Grid Style="{StaticResource MainGridStyle}" RelativeLayout.WidthConstraint="{ConstraintExpression Type=RelativeToParent, Property=Width}" RelativeLayout.HeightConstraint="{ConstraintExpression Type=RelativeToParent, Property=Height}">
      <ScrollView>
        <Grid Style="{StaticResource GridContentStyle}">

          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
          </Grid.RowDefinitions>

          <StackLayout Grid.Row="0" Margin="0,20,0,0">

            <Label Text="{i18n:Translate MedicineAddNew_Header_MedicineInfo} " Style="{StaticResource LabelHeaderEntryStyle}" />

            <controls:InputField IsRequired="True" ShowHeader="false" MaxLength="18" AllowSpecialCharchters="False" ShowValidation="False"
                                 ValidationMessage="" IsEnabled="true" Placeholder="{i18n:Translate MedicineAddNew_Entry_MedicineName}" Title="{Binding Medicine.Name,Mode=TwoWay}"/>


            <StackLayout IsVisible="{Binding AddMode}">


              <controls:ButtonField IsEnabled="True" Title="{i18n:Translate MedicineAddNew_AttachImage}" TextColor="White" BGColor="#27bdb8" ItemHeight="80"
                                 Command="{Binding OnOpenGalleryCommand}"  LeftImage="checked_ico.png" RightImage="camera_ico.png"/>

            </StackLayout>

            <StackLayout IsVisible="{Binding AddMode,Converter={StaticResource BooleanNegateConverter}}">

              <Image x:Name= "imageView" Grid.Column="1" HorizontalOptions="Center" Aspect="AspectFit" Margin="0,0,0,20" VerticalOptions="Center" Source="{Binding Medicine.ImageSource,Mode=TwoWay}"/>

              <controls:ButtonField IsEnabled="True" Title="{i18n:Translate MedicineAddNew_AttachImage}" TextColor="White" BGColor="#27bdb8" ItemHeight="80"
                                   Command="{Binding OnOpenGalleryCommand}"  LeftImage="checked_ico.png" RightImage="camera_ico.png"/>

            </StackLayout>

          </StackLayout>

          <Grid Grid.Row="1">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <BoxView Style="{StaticResource  BoxViewStyle}"/>
          </Grid>

          <StackLayout Grid.Row="2">

            <Label Text="{i18n:Translate MedicineAddNew_Header_MedicineReminder} " Style="{StaticResource LabelHeaderEntryStyle}"/>

            <Grid   >
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>
              <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
              </Grid.RowDefinitions>
              <Button Grid.Row="0" Grid.Column="0" Text="{i18n:Translate MedicineAddNew_WeeklyReminder}" BackgroundColor="{StaticResource BabyBlueColor}"></Button>
              <Button Grid.Row="0" Grid.Column="1" Text="{i18n:Translate MedicineAddNew_MonthlyReminder} " BackgroundColor="{StaticResource LightBlackColor}"></Button>
              <Button Grid.Row="1" Grid.Column="0" Text="{i18n:Translate MedicineAddNew_EventReminder} " BackgroundColor="{StaticResource LightBlackColor}"></Button>
              <Button Grid.Row="1" Grid.Column="1" Text="{i18n:Translate MedicineAddNew_DailyReminder} " BackgroundColor="{StaticResource LightBlackColor}"></Button>
            </Grid>

            <controls:BindablePicker />

          </StackLayout>

          <Grid Grid.Row="3">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <BoxView Style="{StaticResource  BoxViewStyle}"/>
          </Grid>

          <StackLayout Grid.Row="4">

            <Label Text=" {i18n:Translate MedicineAddNew_Header_ChooseReminderDate} " Style="{StaticResource LabelHeaderEntryStyle}"/>

            <Grid   >
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>
              <Grid.RowDefinitions>
                <RowDefinition Height="50" />
                <RowDefinition Height="50" />
              </Grid.RowDefinitions>

              <controls:DatePickerButtonField  Grid.Row="0" Grid.Column="0" Title="{i18n:Translate MedicineAddNew_StartDate}" IsEnabled="true" Date="{Binding Medicine.StartDate,Mode=TwoWay}" TextColor="White" BGColor="{StaticResource BabyBlueColor}" RightImage="" />

              <controls:DatePickerButtonField  Grid.Row="0" Grid.Column="1" Title="{i18n:Translate MedicineAddNew_EndDate}" IsEnabled="true" Date="{Binding Medicine.EndDate,Mode=TwoWay}" TextColor="White" BGColor="{StaticResource BabyBlueColor}" RightImage="" />

            </Grid>

          </StackLayout>

          <Grid Grid.Row="5">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <BoxView Style="{StaticResource  BoxViewStyle}"/>
          </Grid>

          <StackLayout Grid.Row="6">

            <Label Text="{i18n:Translate MedicineAddNew_Header_OtherInfo}" Style="{StaticResource LabelHeaderEntryStyle}" />

            <controls:InputField Title="{Binding Medicine.DiseaseName,Mode=TwoWay}" IsRequired="True" ShowHeader="false" MaxLength="18" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage="" IsEnabled="true" Placeholder="{i18n:Translate MedicineAddNew_Entry_DieseaseName}" />

            <controls:InputField Title="{Binding Medicine.DoctorName,Mode=TwoWay}" IsRequired="True" ShowHeader="false" MaxLength="18" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage="" IsEnabled="true" Placeholder="{i18n:Translate MedicineAddNew_Entry_DoctorName}" />

          </StackLayout>

          <Grid Grid.Row="7">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <BoxView Style="{StaticResource  BoxViewStyle}"/>
          </Grid>

          <StackLayout Grid.Row="8">

            <Label Text="{i18n:Translate MedicineAddNew_Header_AddComment}  " Style="{StaticResource LabelHeaderEntryStyle}" />

            <controls:TextEditorField  Title="{Binding Medicine.Note,Mode=TwoWay}" IsRequired="True" ShowHeader="false" MaxLength="18" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage="" IsEnabled="true"/>

            <controls:ButtonField IsVisible="{Binding IsRecording,Converter={StaticResource BooleanNegateConverter}}" IsEnabled="True" Title="{i18n:Translate MedicineAddNew_AddVoiceNote}" TextColor="White" BGColor="#27bdb8" ItemHeight="50"
                                  Command="{Binding OnRecordVoiceNoteCommand}"  LeftImage="checked_ico.png" RightImage="mic_ico.png"/>

            <controls:ButtonField IsVisible="{Binding IsRecording}" IsEnabled="True" Title="{i18n:Translate MedicineAddNew_StopAndPlayVoiceNote}" TextColor="White" BGColor="#27bdb8" ItemHeight="50"
                               Command="{Binding OnRecordVoiceNoteCommand}"  LeftImage="checked_ico.png" RightImage="mic_ico.png"/>

          </StackLayout>

          <Grid Grid.Row="9">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <BoxView Style="{StaticResource  BoxViewStyle}"/>
          </Grid>

          <Grid Grid.Row="10"  HeightRequest="50" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="2*" />
              <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Button Grid.Row="0" Grid.Column="0" Text="{i18n:Translate MedicineAddNew_SaveAndAdd} " BackgroundColor="{StaticResource DarkBlueColor}" Command="{Binding OnSaveCommand}"></Button>
            <Button Grid.Row="0" Grid.Column="1" Text="{i18n:Translate MedicineAddNew_Save}  " BackgroundColor="{StaticResource OrangeColor}"  Command="{Binding OnSaveCommand}"></Button>
          </Grid>

        </Grid>
      </ScrollView>
    </Grid>

  </RelativeLayout>

</Base:BasePage>