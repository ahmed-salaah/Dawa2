<?xml version="1.0" encoding="utf-8" ?>
<Base:BasePage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:Base="clr-namespace:GHQ.UI.Pages;assembly=GHQ"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                 xmlns:i18n="clr-namespace:Service.Localization;assembly=GHQ"
               xmlns:controls="clr-namespace:Controls;assembly=ProjectX.Common"
            Title="{i18n:Translate PageHeader_NewAccount}"
             x:Class="GHQ.UI.Pages.Account.NewAccountStep4Page">
  <RelativeLayout>
    <Image  Opacity="0.3"  Aspect="AspectFill"
                RelativeLayout.WidthConstraint=
                  "{ConstraintExpression Type=RelativeToParent, Property=Width}"
                RelativeLayout.HeightConstraint=
                  "{ConstraintExpression Type=RelativeToParent, Property=Height}">
      <Image.Source>
        <OnPlatform x:TypeArguments="ImageSource" WinPhone="Assets/background.png" Android="background.png" iOS="background"/>
      </Image.Source>
    </Image>

    <Grid Style="{StaticResource MainGridStyle}" RelativeLayout.WidthConstraint=
              "{ConstraintExpression Type=RelativeToParent, Property=Width}"
            RelativeLayout.HeightConstraint=
              "{ConstraintExpression Type=RelativeToParent, Property=Height}">

      <Grid.RowDefinitions>
        <RowDefinition Height="40" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
      </Grid.RowDefinitions>


      <Grid  Grid.Row="0" BackgroundColor="{StaticResource GoldColor}">
        <Image HorizontalOptions="Center" VerticalOptions="Center"  Aspect="AspectFit" >
          <Image.Source>
            <OnPlatform x:TypeArguments="ImageSource" WinPhone="AccountStep4.png" Android="AccountStep4.png" iOS="AccountStep4"/>
          </Image.Source>
        </Image>
      </Grid>

      <StackLayout Grid.Row="1" Orientation="Vertical" IsVisible="{Binding IsLoading}">

        <ActivityIndicator  IsRunning="{Binding IsLoading}" Style="{StaticResource ActivityIndicatorStyle}" />

        <Label TextColor="Black" Text="{i18n:TranslateExtension Text=NewAccount_LoadingMessage}" HorizontalOptions="Center"  VerticalOptions="Center"></Label>

      </StackLayout>

      <Grid  Grid.Row="2" Style="{StaticResource GridContentStyle}">

        <ScrollView>


          <StackLayout Style="{StaticResource FormStackLayoutStyle}" Orientation="Vertical">

            <StackLayout Orientation="Horizontal" HorizontalOptions="End" Margin="0,0,0,15">

              <Label TextColor="White" Text="{i18n:TranslateExtension Text=NewAccount_Step4Header}" HorizontalOptions="End"  VerticalOptions="Center"></Label>

              <Image Style="{StaticResource HeaderImageStyle}">
                <Image.Source>
                  <OnPlatform x:TypeArguments="ImageSource" WinPhone="personal.png" Android="personal.png" iOS="personal"/>
                </Image.Source>
              </Image>

            </StackLayout>

            <controls:InputField IsRequired="True" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage=""
                                 IsEnabled="{Binding NewAccount.NewAccountStep4.MOIIsDown}"
                                  Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_FirstName}"
                                  Title="{Binding NewAccount.NewAccountStep4.FirstName,Mode=TwoWay}"/>


            <controls:InputField IsRequired="True" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage=""
                                  IsEnabled="{Binding NewAccount.NewAccountStep4.MOIIsDown}"
                                Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_SecondName}"
                                Title="{Binding NewAccount.NewAccountStep4.SecondName,Mode=TwoWay}"/>

            <controls:InputField IsRequired="True" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage=""
                                  IsEnabled="{Binding NewAccount.NewAccountStep4.MOIIsDown}"
                                 Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_ThirdName}"
                                 Title="{Binding NewAccount.NewAccountStep4.ThirdName,Mode=TwoWay}"/>


            <controls:InputField IsRequired="false" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage=""
                                  IsEnabled="{Binding NewAccount.NewAccountStep4.CanEditFourthName}"
                                 Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_FourthName}"
                                 Title="{Binding NewAccount.NewAccountStep4.FourthName,Mode=TwoWay}"/>

            <controls:InputField IsRequired="false" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage=""
                                  IsEnabled="{Binding NewAccount.NewAccountStep4.CanEditFifthName}"
                                 Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_FifthName}"
                                 Title="{Binding NewAccount.NewAccountStep4.FifthName,Mode=TwoWay}"/>

            <Label    Text="{i18n:Translate Account_Picker_Gender}"   Style="{StaticResource LabelHeaderEntryStyle}"/>
            <controls:BindablePicker  IsEnabled="{Binding NewAccount.NewAccountStep4.MOIIsDown}"  ItemsSource="{Binding GenderList}" Style="{StaticResource PickerStyle}" SelectedIndex="{Binding SelectedGenderListIndex,Mode=TwoWay}"   SelectedItem="{Binding NewAccount.NewAccountStep4.SelectedGender,Mode=TwoWay}"/>

            <Label    Text="{i18n:Translate Account_Picker_Nationality}"   Style="{StaticResource LabelHeaderEntryStyle}"/>
            <controls:BindablePicker  IsEnabled="{Binding NewAccount.NewAccountStep4.MOIIsDown}"  ItemsSource="{Binding NationalityList}" SelectedIndex="{Binding SelectedNationalityListIndex,Mode=TwoWay}" SelectedItem="{Binding NewAccount.NewAccountStep4.SelectedNationality,Mode=TwoWay}" Style="{StaticResource PickerStyle}"/>

            <Label    Text="{i18n:Translate Account_Picker_DOB}"   Style="{StaticResource LabelHeaderEntryStyle}"/>
            <DatePicker IsEnabled="{Binding NewAccount.NewAccountStep4.MOIIsDown}"  Date="{Binding NewAccount.NewAccountStep4.DOB}" Style="{StaticResource DatePickerStyle}"/>

            <controls:InputField IsRequired="True" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage="" IsPassword="true"
                        Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_Password}"
                        Title="{Binding NewAccount.NewAccountStep4.Password,Mode=TwoWay}"/>

            <Label  Text="{i18n:Translate NewAccount_Entry_Hint_Password}"   Style="{StaticResource LabelHint}"/>

            <controls:InputField IsRequired="True" MaxLength="80" AllowSpecialCharchters="False" ShowValidation="False" ValidationMessage="" IsPassword="true"
                     Placeholder="{i18n:Translate NewAccount_Entry_PlaceHolder_PasswordConfirmation}"
                     Title="{Binding NewAccount.NewAccountStep4.ConfirmPassword,Mode=TwoWay}"/>


          </StackLayout>

        </ScrollView>
      </Grid>

      <Button Grid.Row="3" Style="{StaticResource ButtonSolidStyle}"  VerticalOptions="End" Text="{i18n:TranslateExtension Text=Confirm}"  Command="{Binding OnNextFourthStepCommand}"></Button>

    </Grid>
  </RelativeLayout>
</Base:BasePage>